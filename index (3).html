<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Concurrent Web Scraper - Go Concurrency Demo</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Background Gradient -->
    <div class="gradient-bg"></div>
    
    <!-- Header -->
    <header class="header">
        <div class="container">
            <h1 class="header-title">‚ö° Concurrent Web Scraper</h1>
            <p class="header-subtitle">Demonstrating Go Goroutines, Channels &amp; Worker Pool Pattern</p>
        </div>
    </header>

    <!-- Main Content -->
    <main class="container">
        <!-- Input Panel -->
        <section class="glass-card input-panel">
            <h2 class="section-title">üìù URL Input</h2>
            <div class="input-group">
                <label for="urls" class="input-label">Enter URLs (one per line):</label>
                <textarea id="urls" class="url-input" rows="8" placeholder="https://example.com\nhttps://another-site.com"></textarea>
                <div class="validation-indicator" id="validationIndicator">
                    <span class="indicator-dot"></span>
                    <span class="indicator-text">Ready to scrape</span>
                </div>
            </div>
            
            <div class="worker-control">
                <label for="workerCount" class="input-label">
                    Worker Pool Size: <span id="workerCountDisplay" class="worker-count-badge">5</span>
                </label>
                <input type="range" id="workerCount" class="worker-slider" min="1" max="10" value="5">
                <div class="slider-labels">
                    <span>1</span>
                    <span>5</span>
                    <span>10</span>
                </div>
            </div>
            
            <div class="button-group">
                <button id="startBtn" class="btn btn-primary">
                    <span class="btn-icon">üöÄ</span>
                    Start Scraping
                </button>
                <button id="stopBtn" class="btn btn-secondary" disabled>
                    <span class="btn-icon">‚è∏</span>
                    Stop
                </button>
                <button id="clearBtn" class="btn btn-outline">
                    <span class="btn-icon">üóë</span>
                    Clear
                </button>
            </div>
        </section>

        <!-- Progress Panel -->
        <section class="glass-card progress-panel" id="progressPanel" style="display: none;">
            <h2 class="section-title">üìä Live Processing Status</h2>
            <div class="progress-info">
                <div class="progress-stats">
                    <div class="stat-item">
                        <span class="stat-label">Total URLs</span>
                        <span class="stat-value" id="totalUrls">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Processed</span>
                        <span class="stat-value" id="processedUrls">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Success</span>
                        <span class="stat-value" id="successCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Failed</span>
                        <span class="stat-value" id="failedCount">0</span>
                    </div>
                </div>
                <div class="progress-bar-container">
                    <div class="progress-bar" id="progressBar"></div>
                    <span class="progress-percentage" id="progressPercentage">0%</span>
                </div>
            </div>
            
            <div class="worker-status-container">
                <h3 class="subsection-title">üë∑ Worker Status</h3>
                <div class="worker-table" id="workerTable">
                    <!-- Worker rows will be dynamically added -->
                </div>
            </div>
        </section>

        <!-- Results Panel -->
        <section class="glass-card results-panel" id="resultsPanel" style="display: none;">
            <div class="results-header">
                <h2 class="section-title">‚úÖ Scraping Results</h2>
                <div class="results-actions">
                    <button id="exportBtn" class="btn btn-small btn-outline">
                        <span class="btn-icon">üì•</span>
                        Export JSON
                    </button>
                </div>
            </div>
            <div class="results-grid" id="resultsGrid">
                <!-- Result cards will be dynamically added -->
            </div>
        </section>

        <!-- Concurrency Concepts -->
        <section class="glass-card concepts-panel">
            <h2 class="section-title">üí° Concurrency Concepts</h2>
            <div class="concepts-grid">
                <div class="concept-card">
                    <div class="concept-icon">‚ö°</div>
                    <h3 class="concept-title">Goroutines</h3>
                    <p class="concept-description">Lightweight threads managed by the Go runtime, allowing thousands of concurrent operations efficiently</p>
                </div>
                <div class="concept-card">
                    <div class="concept-icon">üì°</div>
                    <h3 class="concept-title">Channels</h3>
                    <p class="concept-description">Typed conduits for communication between goroutines, enabling safe data passing and synchronization</p>
                </div>
                <div class="concept-card">
                    <div class="concept-icon">üë∑</div>
                    <h3 class="concept-title">Worker Pool</h3>
                    <p class="concept-description">A fixed number of goroutines processing tasks from a queue, preventing resource exhaustion and enabling controlled concurrency</p>
                </div>
                <div class="concept-card">
                    <div class="concept-icon">üì¶</div>
                    <h3 class="concept-title">Buffered Channels</h3>
                    <p class="concept-description">Channels with capacity that can hold multiple values without blocking the sender until capacity is reached</p>
                </div>
            </div>
        </section>

        <!-- Code Examples -->
        <section class="glass-card code-panel">
            <h2 class="section-title">üíª Code Reference</h2>
            
            <div class="code-examples">
                <div class="code-example">
                    <div class="code-example-header" onclick="toggleCode('code1')">
                        <h3 class="code-example-title">Basic Goroutine</h3>
                        <span class="code-toggle">‚ñº</span>
                    </div>
                    <div class="code-content" id="code1">
                        <button class="copy-btn" onclick="copyCode('code1-pre')" title="Copy to clipboard">üìã Copy</button>
                        <pre id="code1-pre"><code>package main
import (
  "fmt"
  "time"
)

func main() {
  go func() {
    time.Sleep(1 * time.Second)
    fmt.Println("Hello from goroutine!")
  }()
  time.Sleep(2 * time.Second)
}</code></pre>
                    </div>
                </div>

                <div class="code-example">
                    <div class="code-example-header" onclick="toggleCode('code2')">
                        <h3 class="code-example-title">Channel Communication</h3>
                        <span class="code-toggle">‚ñº</span>
                    </div>
                    <div class="code-content" id="code2">
                        <button class="copy-btn" onclick="copyCode('code2-pre')" title="Copy to clipboard">üìã Copy</button>
                        <pre id="code2-pre"><code>package main
import "fmt"

func main() {
  messages := make(chan string)
  
  go func() {
    messages &lt;- "Hello, Channels!"
  }()
  
  msg := &lt;-messages
  fmt.Println(msg)
}</code></pre>
                    </div>
                </div>

                <div class="code-example">
                    <div class="code-example-header" onclick="toggleCode('code3')">
                        <h3 class="code-example-title">Worker Pool Pattern</h3>
                        <span class="code-toggle">‚ñº</span>
                    </div>
                    <div class="code-content" id="code3">
                        <button class="copy-btn" onclick="copyCode('code3-pre')" title="Copy to clipboard">üìã Copy</button>
                        <pre id="code3-pre"><code>func worker(id int, jobs &lt;-chan int, results chan&lt;- int) {
  for j := range jobs {
    fmt.Printf("Worker %d processing job %d\n", id, j)
    time.Sleep(time.Second)
    results &lt;- j * 2
  }
}

func main() {
  jobs := make(chan int, 100)
  results := make(chan int, 100)
  
  // Start workers
  for w := 1; w &lt;= 3; w++ {
    go worker(w, jobs, results)
  }
  
  // Send jobs
  for j := 1; j &lt;= 9; j++ {
    jobs &lt;- j
  }
  close(jobs)
  
  // Collect results
  for a := 1; a &lt;= 9; a++ {
    &lt;-results
  }
}</code></pre>
                    </div>
                </div>

                <div class="code-example">
                    <div class="code-example-header" onclick="toggleCode('code4')">
                        <h3 class="code-example-title">HTTP Request with Context</h3>
                        <span class="code-toggle">‚ñº</span>
                    </div>
                    <div class="code-content" id="code4">
                        <button class="copy-btn" onclick="copyCode('code4-pre')" title="Copy to clipboard">üìã Copy</button>
                        <pre id="code4-pre"><code>func fetchURL(ctx context.Context, url string) (string, error) {
  req, err := http.NewRequestWithContext(ctx, "GET", url, nil)
  if err != nil {
    return "", err
  }
  
  client := &http.Client{Timeout: 10 * time.Second}
  resp, err := client.Do(req)
  if err != nil {
    return "", err
  }
  defer resp.Body.Close()
  
  doc, err := goquery.NewDocumentFromReader(resp.Body)
  if err != nil {
    return "", err
  }
  
  title := doc.Find("title").First().Text()
  return title, nil
}</code></pre>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
        </div>
    </footer>

    <script src="app.js"></script>
</body>
</html>
